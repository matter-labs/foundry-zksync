# Reusable workflow for running tests via `cargo nextest`

name: nextest

on:
  workflow_call:
    inputs:
      profile:
        required: true
        type: string

concurrency:
  group: tests-${{ github.workflow }}-${{ github.head_ref || github.run_id }}
  cancel-in-progress: true

env:
  CARGO_TERM_COLOR: always

jobs:
  matrices:
    name: build matrices
    runs-on: ubuntu-latest
    outputs:
      test-matrix: ${{ steps.gen.outputs.test-matrix }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v4
        with:
          python-version: "3.10"
      - name: Generate matrices
        id: gen
        env:
          EVENT_NAME: ${{ github.event_name }}
          PROFILE: ${{ inputs.profile }}
        run: |
          output=$(python3 .github/scripts/matrices.py)
          echo "::debug::test-matrix=$output"
          echo "test-matrix=$output" >> $GITHUB_OUTPUT

  test:
    name: test ${{ matrix.name }}
    runs-on: ${{ matrix.runner_label }}
    timeout-minutes: 60
    needs: matrices
    strategy:
      fail-fast: false
      matrix: ${{ fromJson(needs.matrices.outputs.test-matrix) }}
    env:
      ETH_RPC_URL: https://eth-mainnet.alchemyapi.io/v2/C3JEvfW6VgtqZQa-Qp1E-2srEiIc02sD
      CARGO_PROFILE_DEV_DEBUG: 0
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
        with:
          target: ${{ matrix.target }}
      - uses: taiki-e/install-action@nextest

      # External tests dependencies
      - name: Setup Node.js
        if: contains(matrix.name, 'external')
        uses: actions/setup-node@v4
        with:
          node-version: 20
      - name: Install Bun
        if: contains(matrix.name, 'external') && !contains(matrix.runner_label, 'windows')
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: latest
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: 3.11
      - name: Install Vyper
        run: pip install vyper~=0.4.0

      - name: Forge RPC cache
        uses: actions/cache@v3
        with:
          path: |
            ~/.foundry/cache
            ~/.config/.foundry/cache
          key: rpc-cache-${{ hashFiles('crates/forge/tests/rpc-cache-keyfile') }}
      - uses: Swatinem/rust-cache@v2
        with:
          cache-on-failure: true

      - name: Setup Git config
        run: |
          git config --global user.name "GitHub Actions Bot"
          git config --global user.email "<>"
          git config --global url."https://github.com/".insteadOf "git@github.com:"
      - name: Test
        env:
          SVM_TARGET_PLATFORM: ${{ matrix.svm_target_platform }}
          HTTP_ARCHIVE_URLS: ${{ secrets.HTTP_ARCHIVE_URLS }}
          WS_ARCHIVE_URLS: ${{ secrets.WS_ARCHIVE_URLS }}
        # run: cargo nextest run cmd::tests::can_parse_disable_code_size_limit cmd::tests::can_parse_fork_headers cmd::tests::can_parse_max_persisted_states_config cmd::tests::test_parse_fork_url cmd::tests::can_parse_prune_config eth::backend::db::test::test_deser_block eth::backend::mem::in_memory_db::tests::test_dump_reload_cycle eth::backend::mem::storage::tests::test_init_state_limits eth::backend::mem::storage::tests::test_storage_dump_reload_cycle evm::tests::build_evm_with_extra_precompiles anvil::can_set_empty_code anvil::test_can_handle_large_timestamp anvil::test_shanghai_fields anvil::test_can_use_default_genesis_timestamp anvil_api::can_auto_impersonate_account anvil_api::can_get_wallet_capabilities anvil_api::can_impersonate_contract anvil_api::can_impersonate_multiple_accounts anvil_api::can_remove_pool_transactions anvil_api::can_set_executor anvil_api::can_set_storage eth::backend::mem::storage::tests::can_decrease_state_cache_size anvil_api::can_get_metadata_on_fork anvil_api::test_evm_set_time_in_past anvil_api::test_fork_revert_next_block_timestamp anvil_api::test_increase_time_by_zero anvil_api::test_mine_blks_with_same_timestamp anvil_api::test_can_set_storage_bsc_fork anvil_api::metadata_changes_on_reset anvil_api::test_set_next_timestamp anvil_api::test_reorg api::can_call_with_undersized_max_fee_per_gas api::can_estimate_gas_with_undersized_max_fee_per_gas api::can_get_block_by_number api::can_get_chain_id api::can_call_on_pending_block api::can_get_network_id api::can_get_price api::can_modify_chain_id eip4844::can_correctly_estimate_blob_gas_with_recommended_fillers eip7702::can_send_eip7702_tx eip4844::can_mine_blobs_when_exceeds_max_blobs eip4844::can_send_multiple_blobs_in_one_tx fork::can_impersonate_in_fork fork::test_arb_fork_mining fork::test_block_receipts fork::test_arbitrum_fork_dev_balance fork::can_reset_fork_to_new_fork fork::test_fork_block_timestamp fork::test_fork_can_send_tx fork::test_fork_eth_get_balance fork::test_fork_eth_get_nonce fork::test_fork_eth_get_code fork::test_fork_get_account fork::test_fork_gas_limit_applied_from_config fork::test_fork_call fork::test_fork_query_at_fork_block fork::test_fork_reset_basefee fork::test_fork_reset_setup fork::test_fork_snapshot_block_timestamp fork::test_fork_state_snapshotting_blocks fork::test_fork_with_custom_chain_id fork::test_fork_timestamp fork::test_reset_dev_account_nonce gas::test_basefee_empty_block gas::test_basefee_half_block fork::test_separate_states gas::test_gas_limit_applied_from_config gas::test_respect_base_fee genesis::can_apply_genesis logs::get_past_events optimism::test_deposit_transaction_hash_matches_sepolia optimism::test_deposits_not_supported_if_optimism_disabled optimism::test_send_value_raw_deposit_transaction fork::test_fork_nft_set_approve_all otterscan::ots_get_api_level otterscan::ots_get_block_details_by_hash otterscan::ots_get_contract_creator otterscan::ots_get_internal_operations_contract_deploy otterscan::ots_get_transaction_by_sender_and_nonce otterscan::ots_get_internal_operations_contract_selfdestruct_london otterscan::ots_get_transaction_error_no_error otterscan::test_call_ots_trace_transaction proof::test_account_proof otterscan::ots_search_transactions_after ipc::test_sub_new_heads_ipc pubsub::test_sub_logs pubsub::test_filters pubsub::test_sub_logs_legacy revert::test_another_revert_message revert::test_revert_messages revert::test_solc_revert_example sign::can_sign_typed_data sign::can_sign_typed_seaport_data sign::rejects_invalid_chain_id state::can_load_existing_state_legacy pubsub::test_sub_new_heads_fast state::can_load_state state::test_make_sure_historical_state_is_not_cleared_on_dump traces::test_debug_trace_call_state_override traces::test_parity_suicide_trace traces::test_transfer_debug_trace_call transaction::can_call_greeter_historic transaction::can_deploy_and_mine_manually transaction::can_deploy_greeter_http state::test_fork_load_state transaction::can_get_historic_info transaction::can_get_raw_transaction transaction::can_handle_multiple_concurrent_deploys_with_same_nonce transaction::can_handle_multiple_concurrent_transfers_with_same_nonce transaction::can_mine_large_gas_limit transaction::can_order_transactions transaction::can_reject_underpriced_replacement transaction::can_transfer_eth transaction::get_blocktimestamp_works transaction::test_estimate_gas transaction::test_reject_eip1559_pre_london transaction::test_tx_access_list transaction::can_respect_nonces txpool::geth_txpool tests::can_parse_help eth::block::tests::header_rlp_roundtrip eth::block::tests::test_eip1559_block_header_hash eth::tests::test_custom_auto_impersonate_account wsapi::can_get_block_number_ws eth::tests::test_custom_drop_tx eth::tests::test_custom_impersonate_account eth::tests::test_custom_mine eth::tests::test_custom_set_balance eth::tests::test_custom_set_nonce eth::tests::test_eth_accounts eth::tests::test_eth_block_tx_count_by_block_hash eth::tests::test_eth_chain_id eth::tests::test_eth_get_proof eth::tests::test_eth_network_id eth::tests::test_eth_sign eth::tests::test_eth_syncing eth::tests::test_net_listening eth::tests::test_serde_anvil_reorg eth::tests::test_serde_custom_dump_state eth::tests::test_serde_custom_evm_mine_detailed eth::tests::test_serde_custom_increase_time eth::tests::test_serde_custom_logging eth::tests::test_serde_custom_next_block_base_fee eth::tests::test_serde_custom_remove_timestamp_interval eth::tests::test_serde_custom_set_storage_at eth::tests::test_serde_custom_timestamp_interval eth::tests::test_serde_debug_trace_call eth::tests::test_serde_eth_balance eth::tests::test_serde_eth_storage eth::tests::test_serde_eth_unsubscribe eth::tests::test_web3_client_version eth::transaction::optimism::tests::test_encode_decode eth::transaction::tests::can_recover_sender eth::transaction::tests::decode_legacy_receipt eth::transaction::tests::encode_legacy_receipt eth::transaction::tests::test_decode_create_goerli request::tests::can_deserialize_call request::tests::can_serialize_batch request::tests::can_serialize_method eth::transaction::tests::test_decode_live_4844_tx base::tests::can_parse_base base::tests::test_fmt_macro rlp_converter::test::encode_decode_test base::tests::test_format_pos tests::abi_decode tests::calldata_bool tests::disassemble_incomplete_sequence tests::calldata_uint tests::selector_with_arg block_number_hash balance traces::test_trace_address_fork2 calldata_array ens_namehash ens_resolve_no_dot_eth error_decode_with_sig estimate_contract_deploy_gas event_decode_with_openchain cast_run_impersonated_tx fetch_creation_code_from_etherscan fetch_artifact_from_etherscan format_units fetch_weth_interface_from_etherscan impl_slot index7201 interface_no_constructor logs_topic_2 logs_sig mktx mktx_signer_from_match new_wallet_keystore_with_password parse_units rpc_no_args receipt_revert_reason rpc_raw_params_stdin send_requires_to storage decode_traces_with_project_artifacts run_succeeds storage_layout_simple_json tx_raw test_non_mainnet_traces wallet_list_local_accounts wallet_mnemonic_from_entropy_json wallet_address_keystore_with_password_file wallet_private_key_from_mnemonic_option wallet_sign_auth wallet_sign_message_utf8_data wallet_sign_typed_data_string args::tests::parse_call_data args::tests::parse_signature cmd::call::tests::call_sig_and_data_exclusive cmd::create2::tests::create2_init_code cmd::create2::tests::basic_create2 cmd::create2::tests::create2_salt cmd::create2::tests::deterministic_seed cmd::logs::tests::test_build_filter_basic cmd::create2::tests::matches_pattern cmd::logs::tests::test_build_filter_sig_with_mismatched_argument cmd::logs::tests::test_build_filter_sig cmd::logs::tests::test_build_filter_with_invalid_topic cmd::logs::tests::test_build_filter_with_invalid_sig_or_topic cmd::logs::tests::test_build_filter_with_topics cmd::wallet::tests::can_parse_wallet_sign_data cmd::wallet::tests::can_verify_signed_hex_message cmd::wallet::tests::can_parse_wallet_sign_hex_message cmd::wallet::vanity::tests::save_path dispatcher::tests::test_comment_regex cmd::wallet::vanity::tests::find_simple_vanity_start storage_layout_complex_json test_clear_cache test_list_sessions test_load_latest_cache test_write_session executor::tests::test_expressions build::compile_json executor::tests::test_types build::build_sizes_no_forge_std cache::can_list_cache build::test_can_skip_contract cache::can_list_specific_chain cmd::can_bind cmd::can_build_names_repeatedly cmd::can_build_skip_contracts cmd::can_build_specific_paths cmd::can_check_snapshot cmd::can_clean_non_existing cmd::can_clean_config cmd::can_clone cmd::can_compile_without_warnings cmd::can_detect_dirty_git_status_on_init cmd::can_clone_no_remappings_txt cmd::can_fail_compile_with_warnings cmd::can_init_in_empty_repo cmd::can_init_no_git cmd::can_emit_multiple_extra_output cmd::can_init_quiet cmd::can_init_vscode cmd::can_init_template cmd::can_inspect_counter_pretty cmd::can_init_with_dir_and_template cmd::can_install_and_remove cmd::can_install_missing_deps_test cmd::can_print_warnings build::initcode_size_exceeds_limit cmd::can_use_absolute_imports_from_test_and_script cmd::gas_report_all_contracts cmd::can_install_latest_release_tag cmd::gas_report_ignore_some_contracts cmd::gas_report_size_for_nested_create compiler::can_list_resolved_compiler_versions compiler::can_list_resolved_compiler_versions_verbose compiler::can_list_resolved_multiple_compiler_versions cmd::gas_report_with_fallback compiler::can_list_resolved_multiple_compiler_versions_skipped_json compiler::can_list_resolved_multiple_compiler_versions_verbose_json cmd::can_update_library_with_outdated_nested_dependency config::can_extract_config_values config::can_detect_config_vals config::can_override_config config::can_parse_dapp_libraries config::can_resolve_symlink_fs_permissions config::can_set_gas_price config::can_show_config config::can_set_solc_explicitly config::can_parse_remappings_correctly config::can_update_libs_section config::config_emit_warnings config::test_project_remappings context::can_set_forge_script_dry_run_context context::can_set_forge_test_snapshot_context config::test_submodule_root_path_remappings coverage::assert coverage::branch_with_calldata_reads coverage::empty_functions coverage::line_hit_not_doubled coverage::identical_bytecodes coverage::no_match coverage::require coverage::yul coverage::single_statement create::can_create_oracle_on_goerli create::can_create_simple_on_goerli eip712::test_eip712 create::can_create_using_unlocked coverage::basic_crlf ext_integration::drai ext_integration::makerdao_multicall ext_integration::lil_web3 ext_integration::prb_math ext_integration::geb ext_integration::stringutils geiger::call inline_config::evm_version inline_config::invalid_value inline_config::runs multi_script::can_not_change_fork_during_broadcast multi_script::can_resume_multi_chain_script ext_integration::solady script::adheres_to_json_flag script::assert_can_detect_unlinked_target_with_libraries script::assert_can_create_multiple_contracts_with_correct_nonce script::assert_exit_code_error_on_failure_script script::assert_tx_origin_is_not_overritten script::can_decode_custom_errors script::can_deploy_and_simulate_mixed_broadcast_modes script::can_deploy_library_create2 script::can_deploy_no_arg_broadcast script::can_deploy_script_with_lib script::can_deploy_unlocked script::can_deploy_with_custom_create2 script::can_detect_contract_when_multiple_versions script::can_execute_script_command2 script::can_execute_script_command_with_args script::can_execute_script_command_with_manual_gas_limit_unlocked script::can_execute_script_command_with_sig script::can_execute_script_with_arguments_nested_deploy script::can_remeber_keys script::can_run_script_with_empty_setup script::can_sign_with_script_wallet_multiple script::can_simulate_with_default_sender script::check_broadcast_log script::does_script_override_correctly script::fail_broadcast_staticcall script::panic_no_deployer_set script::test_broadcast_raw_create2_deployer script::test_default_sender_balance soldeer::install_dependency soldeer::install_dependency_git_commit soldeer::install_dependency_with_remappings_txt soldeer::update_dependencies svm::can_test_with_latest_solc svm::test_svm_releases_linux_amd64 svm::test_svm_releases_macos_amd64 test_cmd::can_disable_block_gas_limit test_cmd::can_get_broadcast_txs script::can_deploy_script_remember_key test_cmd::can_run_test_with_json_output_non_verbose test_cmd::can_set_filter_values test_cmd::can_test_repeatedly test_cmd::can_test_with_match_path test_cmd::can_use_libs_in_multi_fork test_cmd::deterministic_randomness_with_seed test_cmd::exit_code_error_on_fail_fast test_cmd::fork_traces test_cmd::gas_metering_gasleft test_cmd::gas_metering_reset test_cmd::internal_functions_trace ext_integration::sablier_v2 test_cmd::metadata_bytecode_traces test_cmd::runs_tests_exactly_once_with_changed_versions test_cmd::pause_tracing test_cmd::should_exit_early_on_invariant_failure test_cmd::should_generate_junit_xml_report_with_logs test_cmd::should_not_record_setup_failures test_cmd::should_not_show_logs_when_fuzz_test_inline_config test_cmd::should_show_logs_when_fuzz_test_inline_config test_cmd::should_replay_failures_only test_cmd::should_show_state_changes test_cmd::test_assume_no_revert test_cmd::skip_setup test_cmd::test_expect_partial_revert test_cmd::test_fail_deprecation_warning test_cmd::test_deprecated_cheatcode_warning test_cmd::warn_no_tests_match verify::can_guess_constructor_args verify::can_verify_random_contract_optimism_kovan verify_bytecode::can_ignore_creation test_cmd::test_roll_scroll_fork_with_cancun verify_bytecode::can_vb_create2_with_blockscout verify_bytecode::can_verify_bytecode_with_blockscout script::can_deploy_script_remember_key verify_bytecode::can_verify_bytecode_with_metadata cheats::test_cheats_local_multi_version cheats::test_cheats_local_default_isolated core::test_assertions_revert_false core::test_core core::test_env_vars core::test_linking core::test_trace fork::test_cheats_fork_revert fork::test_get_logs_fork script::can_deploy_script_remember_key fork::test_launch_fork_ws fs::test_fs_default fuzz::test_can_scrape_bytecode fuzz::test_inline_max_test_rejects fuzz::test_successful_fuzz_cases invariant::should_revert_with_assume_code inline::inline_config_run_invariant invariant::should_not_fail_replay_assume invariant::test_invariant_after_invariant invariant::test_invariant_decode_custom_error invariant::test_invariant_assume_does_not_revert invariant::test_invariant_fail_on_revert invariant::test_invariant_fixtures invariant::test_invariant_inner_contract invariant::test_invariant_preserve_state invariant::test_invariant_selectors_weight invariant::test_invariant_with_alias repros::issue_2623 test_invariant_roll_fork_handler

        # funca!
        # run: cargo nextest run cmd::wallet::tests::can_parse_wallet_sign_hex_message cmd::wallet::vanity::tests::save_path dispatcher::tests::test_comment_regex cmd::wallet::vanity::tests::find_simple_vanity_start storage_layout_complex_json test_clear_cache test_list_sessions test_load_latest_cache test_write_session executor::tests::test_expressions build::compile_json executor::tests::test_types build::build_sizes_no_forge_std cache::can_list_cache build::test_can_skip_contract cache::can_list_specific_chain cmd::can_bind cmd::can_build_names_repeatedly cmd::can_build_skip_contracts cmd::can_build_specific_paths cmd::can_check_snapshot cmd::can_clean_non_existing cmd::can_clean_config cmd::can_clone cmd::can_compile_without_warnings cmd::can_detect_dirty_git_status_on_init cmd::can_clone_no_remappings_txt cmd::can_fail_compile_with_warnings cmd::can_init_in_empty_repo cmd::can_init_no_git cmd::can_emit_multiple_extra_output cmd::can_init_quiet cmd::can_init_vscode cmd::can_init_template cmd::can_inspect_counter_pretty cmd::can_init_with_dir_and_template cmd::can_install_and_remove cmd::can_install_missing_deps_test cmd::can_print_warnings build::initcode_size_exceeds_limit cmd::can_use_absolute_imports_from_test_and_script cmd::gas_report_all_contracts cmd::can_install_latest_release_tag cmd::gas_report_ignore_some_contracts cmd::gas_report_size_for_nested_create compiler::can_list_resolved_compiler_versions compiler::can_list_resolved_compiler_versions_verbose compiler::can_list_resolved_multiple_compiler_versions cmd::gas_report_with_fallback compiler::can_list_resolved_multiple_compiler_versions_skipped_json compiler::can_list_resolved_multiple_compiler_versions_verbose_json cmd::can_update_library_with_outdated_nested_dependency config::can_extract_config_values config::can_detect_config_vals config::can_override_config config::can_parse_dapp_libraries config::can_resolve_symlink_fs_permissions config::can_set_gas_price config::can_show_config config::can_set_solc_explicitly config::can_parse_remappings_correctly config::can_update_libs_section config::config_emit_warnings config::test_project_remappings context::can_set_forge_script_dry_run_context context::can_set_forge_test_snapshot_context config::test_submodule_root_path_remappings coverage::assert coverage::branch_with_calldata_reads coverage::empty_functions test_invariant_roll_fork_handler

        # no funca
        # run: cargo nextest run cmd::wallet::tests::can_parse_wallet_sign_hex_message cmd::wallet::vanity::tests::save_path dispatcher::tests::test_comment_regex cmd::wallet::vanity::tests::find_simple_vanity_start storage_layout_complex_json test_clear_cache test_list_sessions test_load_latest_cache test_write_session executor::tests::test_expressions build::compile_json executor::tests::test_types build::build_sizes_no_forge_std cache::can_list_cache build::test_can_skip_contract cache::can_list_specific_chain cmd::can_bind cmd::can_build_names_repeatedly cmd::can_build_skip_contracts cmd::can_build_specific_paths cmd::can_check_snapshot cmd::can_clean_non_existing cmd::can_clean_config cmd::can_clone cmd::can_compile_without_warnings cmd::can_detect_dirty_git_status_on_init cmd::can_clone_no_remappings_txt cmd::can_fail_compile_with_warnings cmd::can_init_in_empty_repo cmd::can_init_no_git cmd::can_emit_multiple_extra_output cmd::can_init_quiet cmd::can_init_vscode cmd::can_init_template cmd::can_inspect_counter_pretty cmd::can_init_with_dir_and_template cmd::can_install_and_remove cmd::can_install_missing_deps_test cmd::can_print_warnings build::initcode_size_exceeds_limit cmd::can_use_absolute_imports_from_test_and_script cmd::gas_report_all_contracts cmd::can_install_latest_release_tag cmd::gas_report_ignore_some_contracts cmd::gas_report_size_for_nested_create compiler::can_list_resolved_compiler_versions compiler::can_list_resolved_compiler_versions_verbose compiler::can_list_resolved_multiple_compiler_versions cmd::gas_report_with_fallback compiler::can_list_resolved_multiple_compiler_versions_skipped_json compiler::can_list_resolved_multiple_compiler_versions_verbose_json cmd::can_update_library_with_outdated_nested_dependency config::can_extract_config_values config::can_detect_config_vals config::can_override_config config::can_parse_dapp_libraries config::can_resolve_symlink_fs_permissions config::can_set_gas_price config::can_show_config config::can_set_solc_explicitly config::can_parse_remappings_correctly config::can_update_libs_section config::config_emit_warnings config::test_project_remappings context::can_set_forge_script_dry_run_context context::can_set_forge_test_snapshot_context config::test_submodule_root_path_remappings coverage::assert coverage::branch_with_calldata_reads coverage::empty_functions coverage::line_hit_not_doubled coverage::identical_bytecodes coverage::no_match coverage::require coverage::yul coverage::single_statement create::can_create_oracle_on_goerli create::can_create_simple_on_goerli eip712::test_eip712 create::can_create_using_unlocked coverage::basic_crlf ext_integration::drai ext_integration::makerdao_multicall ext_integration::lil_web3 ext_integration::prb_math ext_integration::geb ext_integration::stringutils geiger::call inline_config::evm_version inline_config::invalid_value inline_config::runs multi_script::can_not_change_fork_during_broadcast multi_script::can_resume_multi_chain_script ext_integration::solady script::adheres_to_json_flag script::assert_can_detect_unlinked_target_with_libraries script::assert_can_create_multiple_contracts_with_correct_nonce script::assert_exit_code_error_on_failure_script script::assert_tx_origin_is_not_overritten script::can_decode_custom_errors script::can_deploy_and_simulate_mixed_broadcast_modes script::can_deploy_library_create2 script::can_deploy_no_arg_broadcast script::can_deploy_script_with_lib script::can_deploy_unlocked script::can_deploy_with_custom_create2 script::can_detect_contract_when_multiple_versions script::can_execute_script_command2 script::can_execute_script_command_with_args script::can_execute_script_command_with_manual_gas_limit_unlocked script::can_execute_script_command_with_sig script::can_execute_script_with_arguments_nested_deploy script::can_remeber_keys script::can_run_script_with_empty_setup script::can_sign_with_script_wallet_multiple script::can_simulate_with_default_sender script::check_broadcast_log script::does_script_override_correctly script::fail_broadcast_staticcall script::panic_no_deployer_set script::test_broadcast_raw_create2_deployer script::test_default_sender_balance soldeer::install_dependency soldeer::install_dependency_git_commit soldeer::install_dependency_with_remappings_txt soldeer::update_dependencies svm::can_test_with_latest_solc svm::test_svm_releases_linux_amd64 svm::test_svm_releases_macos_amd64 test_cmd::can_disable_block_gas_limit test_cmd::can_get_broadcast_txs script::can_deploy_script_remember_key test_cmd::can_run_test_with_json_output_non_verbose test_cmd::can_set_filter_values test_cmd::can_test_repeatedly test_cmd::can_test_with_match_path test_cmd::can_use_libs_in_multi_fork test_cmd::deterministic_randomness_with_seed test_cmd::exit_code_error_on_fail_fast test_cmd::fork_traces test_cmd::gas_metering_gasleft test_cmd::gas_metering_reset test_cmd::internal_functions_trace ext_integration::sablier_v2 test_cmd::metadata_bytecode_traces test_cmd::runs_tests_exactly_once_with_changed_versions test_cmd::pause_tracing test_cmd::should_exit_early_on_invariant_failure test_cmd::should_generate_junit_xml_report_with_logs test_cmd::should_not_record_setup_failures test_cmd::should_not_show_logs_when_fuzz_test_inline_config test_cmd::should_show_logs_when_fuzz_test_inline_config test_cmd::should_replay_failures_only test_cmd::should_show_state_changes test_cmd::test_assume_no_revert test_cmd::skip_setup test_cmd::test_expect_partial_revert test_cmd::test_fail_deprecation_warning test_cmd::test_deprecated_cheatcode_warning test_cmd::warn_no_tests_match verify::can_guess_constructor_args verify::can_verify_random_contract_optimism_kovan verify_bytecode::can_ignore_creation test_cmd::test_roll_scroll_fork_with_cancun verify_bytecode::can_vb_create2_with_blockscout verify_bytecode::can_verify_bytecode_with_blockscout script::can_deploy_script_remember_key verify_bytecode::can_verify_bytecode_with_metadata cheats::test_cheats_local_multi_version cheats::test_cheats_local_default_isolated core::test_assertions_revert_false core::test_core core::test_env_vars core::test_linking core::test_trace fork::test_cheats_fork_revert fork::test_get_logs_fork script::can_deploy_script_remember_key fork::test_launch_fork_ws fs::test_fs_default fuzz::test_can_scrape_bytecode fuzz::test_inline_max_test_rejects fuzz::test_successful_fuzz_cases invariant::should_revert_with_assume_code inline::inline_config_run_invariant invariant::should_not_fail_replay_assume invariant::test_invariant_after_invariant invariant::test_invariant_decode_custom_error invariant::test_invariant_assume_does_not_revert invariant::test_invariant_fail_on_revert invariant::test_invariant_fixtures invariant::test_invariant_inner_contract invariant::test_invariant_preserve_state invariant::test_invariant_selectors_weight invariant::test_invariant_with_alias repros::issue_2623 test_invariant_roll_fork_handler

        # segundos (funcan)
        # run: cargo nextest run test_cmd::metadata_bytecode_traces test_cmd::runs_tests_exactly_once_with_changed_versions test_cmd::pause_tracing test_cmd::should_exit_early_on_invariant_failure test_cmd::should_generate_junit_xml_report_with_logs test_cmd::should_not_record_setup_failures test_cmd::should_not_show_logs_when_fuzz_test_inline_config test_cmd::should_show_logs_when_fuzz_test_inline_config test_cmd::should_replay_failures_only test_cmd::should_show_state_changes test_cmd::test_assume_no_revert test_cmd::skip_setup test_cmd::test_expect_partial_revert test_cmd::test_fail_deprecation_warning test_cmd::test_deprecated_cheatcode_warning test_cmd::warn_no_tests_match verify::can_guess_constructor_args verify::can_verify_random_contract_optimism_kovan verify_bytecode::can_ignore_creation test_cmd::test_roll_scroll_fork_with_cancun verify_bytecode::can_vb_create2_with_blockscout verify_bytecode::can_verify_bytecode_with_blockscout script::can_deploy_script_remember_key verify_bytecode::can_verify_bytecode_with_metadata cheats::test_cheats_local_multi_version cheats::test_cheats_local_default_isolated core::test_assertions_revert_false core::test_core core::test_env_vars core::test_linking core::test_trace fork::test_cheats_fork_revert fork::test_get_logs_fork script::can_deploy_script_remember_key fork::test_launch_fork_ws fs::test_fs_default fuzz::test_can_scrape_bytecode fuzz::test_inline_max_test_rejects fuzz::test_successful_fuzz_cases invariant::should_revert_with_assume_code inline::inline_config_run_invariant invariant::should_not_fail_replay_assume invariant::test_invariant_after_invariant invariant::test_invariant_decode_custom_error invariant::test_invariant_assume_does_not_revert invariant::test_invariant_fail_on_revert invariant::test_invariant_fixtures invariant::test_invariant_inner_contract invariant::test_invariant_preserve_state invariant::test_invariant_selectors_weight invariant::test_invariant_with_alias repros::issue_2623 test_invariant_roll_fork_handler

        # primeros (tambien funcan)
        # run: cargo nextest run cmd::wallet::tests::can_parse_wallet_sign_hex_message cmd::wallet::vanity::tests::save_path dispatcher::tests::test_comment_regex cmd::wallet::vanity::tests::find_simple_vanity_start storage_layout_complex_json test_clear_cache test_list_sessions test_load_latest_cache test_write_session executor::tests::test_expressions build::compile_json executor::tests::test_types build::build_sizes_no_forge_std cache::can_list_cache build::test_can_skip_contract cache::can_list_specific_chain cmd::can_bind cmd::can_build_names_repeatedly cmd::can_build_skip_contracts cmd::can_build_specific_paths cmd::can_check_snapshot cmd::can_clean_non_existing cmd::can_clean_config cmd::can_clone cmd::can_compile_without_warnings cmd::can_detect_dirty_git_status_on_init cmd::can_clone_no_remappings_txt cmd::can_fail_compile_with_warnings cmd::can_init_in_empty_repo cmd::can_init_no_git cmd::can_emit_multiple_extra_output cmd::can_init_quiet cmd::can_init_vscode cmd::can_init_template cmd::can_inspect_counter_pretty cmd::can_init_with_dir_and_template cmd::can_install_and_remove cmd::can_install_missing_deps_test cmd::can_print_warnings build::initcode_size_exceeds_limit cmd::can_use_absolute_imports_from_test_and_script cmd::gas_report_all_contracts cmd::can_install_latest_release_tag cmd::gas_report_ignore_some_contracts cmd::gas_report_size_for_nested_create compiler::can_list_resolved_compiler_versions compiler::can_list_resolved_compiler_versions_verbose compiler::can_list_resolved_multiple_compiler_versions cmd::gas_report_with_fallback compiler::can_list_resolved_multiple_compiler_versions_skipped_json compiler::can_list_resolved_multiple_compiler_versions_verbose_json cmd::can_update_library_with_outdated_nested_dependency config::can_extract_config_values config::can_detect_config_vals config::can_override_config config::can_parse_dapp_libraries config::can_resolve_symlink_fs_permissions config::can_set_gas_price config::can_show_config config::can_set_solc_explicitly config::can_parse_remappings_correctly config::can_update_libs_section config::config_emit_warnings config::test_project_remappings context::can_set_forge_script_dry_run_context context::can_set_forge_test_snapshot_context config::test_submodule_root_path_remappings coverage::assert coverage::branch_with_calldata_reads coverage::empty_functions coverage::line_hit_not_doubled coverage::identical_bytecodes coverage::no_match coverage::require coverage::yul coverage::single_statement create::can_create_oracle_on_goerli create::can_create_simple_on_goerli eip712::test_eip712 create::can_create_using_unlocked coverage::basic_crlf ext_integration::drai ext_integration::makerdao_multicall ext_integration::lil_web3 ext_integration::prb_math ext_integration::geb ext_integration::stringutils geiger::call inline_config::evm_version inline_config::invalid_value inline_config::runs multi_script::can_not_change_fork_during_broadcast multi_script::can_resume_multi_chain_script ext_integration::solady script::adheres_to_json_flag script::assert_can_detect_unlinked_target_with_libraries script::assert_can_create_multiple_contracts_with_correct_nonce script::assert_exit_code_error_on_failure_script script::assert_tx_origin_is_not_overritten script::can_decode_custom_errors script::can_deploy_and_simulate_mixed_broadcast_modes script::can_deploy_library_create2 script::can_deploy_no_arg_broadcast script::can_deploy_script_with_lib script::can_deploy_unlocked script::can_deploy_with_custom_create2 script::can_detect_contract_when_multiple_versions script::can_execute_script_command2 script::can_execute_script_command_with_args script::can_execute_script_command_with_manual_gas_limit_unlocked script::can_execute_script_command_with_sig script::can_execute_script_with_arguments_nested_deploy script::can_remeber_keys script::can_run_script_with_empty_setup script::can_sign_with_script_wallet_multiple script::can_simulate_with_default_sender script::check_broadcast_log script::does_script_override_correctly script::fail_broadcast_staticcall script::panic_no_deployer_set script::test_broadcast_raw_create2_deployer script::test_default_sender_balance soldeer::install_dependency soldeer::install_dependency_git_commit soldeer::install_dependency_with_remappings_txt soldeer::update_dependencies svm::can_test_with_latest_solc svm::test_svm_releases_linux_amd64 svm::test_svm_releases_macos_amd64 test_cmd::can_disable_block_gas_limit test_cmd::can_get_broadcast_txs script::can_deploy_script_remember_key test_cmd::can_run_test_with_json_output_non_verbose test_cmd::can_set_filter_values test_cmd::can_test_repeatedly test_cmd::can_test_with_match_path test_cmd::can_use_libs_in_multi_fork test_cmd::deterministic_randomness_with_seed test_cmd::exit_code_error_on_fail_fast test_cmd::fork_traces test_cmd::gas_metering_gasleft test_cmd::gas_metering_reset test_cmd::internal_functions_trace ext_integration::sablier_v2 test_invariant_roll_fork_handler

        # partamos de (no funca) y agrandemos el set de primeros, agregando los segundos, hasta ver cuando rompe
        # primeros -> 5900 aprox (funca)
        # run: cargo nextest run cmd::wallet::tests::can_parse_wallet_sign_hex_message cmd::wallet::vanity::tests::save_path dispatcher::tests::test_comment_regex cmd::wallet::vanity::tests::find_simple_vanity_start storage_layout_complex_json test_clear_cache test_list_sessions test_load_latest_cache test_write_session executor::tests::test_expressions build::compile_json executor::tests::test_types build::build_sizes_no_forge_std cache::can_list_cache build::test_can_skip_contract cache::can_list_specific_chain cmd::can_bind cmd::can_build_names_repeatedly cmd::can_build_skip_contracts cmd::can_build_specific_paths cmd::can_check_snapshot cmd::can_clean_non_existing cmd::can_clean_config cmd::can_clone cmd::can_compile_without_warnings cmd::can_detect_dirty_git_status_on_init cmd::can_clone_no_remappings_txt cmd::can_fail_compile_with_warnings cmd::can_init_in_empty_repo cmd::can_init_no_git cmd::can_emit_multiple_extra_output cmd::can_init_quiet cmd::can_init_vscode cmd::can_init_template cmd::can_inspect_counter_pretty cmd::can_init_with_dir_and_template cmd::can_install_and_remove cmd::can_install_missing_deps_test cmd::can_print_warnings build::initcode_size_exceeds_limit cmd::can_use_absolute_imports_from_test_and_script cmd::gas_report_all_contracts cmd::can_install_latest_release_tag cmd::gas_report_ignore_some_contracts cmd::gas_report_size_for_nested_create compiler::can_list_resolved_compiler_versions compiler::can_list_resolved_compiler_versions_verbose compiler::can_list_resolved_multiple_compiler_versions cmd::gas_report_with_fallback compiler::can_list_resolved_multiple_compiler_versions_skipped_json compiler::can_list_resolved_multiple_compiler_versions_verbose_json cmd::can_update_library_with_outdated_nested_dependency config::can_extract_config_values config::can_detect_config_vals config::can_override_config config::can_parse_dapp_libraries config::can_resolve_symlink_fs_permissions config::can_set_gas_price config::can_show_config config::can_set_solc_explicitly config::can_parse_remappings_correctly config::can_update_libs_section config::config_emit_warnings config::test_project_remappings context::can_set_forge_script_dry_run_context context::can_set_forge_test_snapshot_context config::test_submodule_root_path_remappings coverage::assert coverage::branch_with_calldata_reads coverage::empty_functions coverage::line_hit_not_doubled coverage::identical_bytecodes coverage::no_match coverage::require coverage::yul coverage::single_statement create::can_create_oracle_on_goerli create::can_create_simple_on_goerli eip712::test_eip712 create::can_create_using_unlocked coverage::basic_crlf ext_integration::drai ext_integration::makerdao_multicall ext_integration::lil_web3 ext_integration::prb_math ext_integration::geb ext_integration::stringutils geiger::call inline_config::evm_version inline_config::invalid_value inline_config::runs multi_script::can_not_change_fork_during_broadcast multi_script::can_resume_multi_chain_script ext_integration::solady script::adheres_to_json_flag script::assert_can_detect_unlinked_target_with_libraries script::assert_can_create_multiple_contracts_with_correct_nonce script::assert_exit_code_error_on_failure_script script::assert_tx_origin_is_not_overritten script::can_decode_custom_errors script::can_deploy_and_simulate_mixed_broadcast_modes script::can_deploy_library_create2 script::can_deploy_no_arg_broadcast script::can_deploy_script_with_lib script::can_deploy_unlocked script::can_deploy_with_custom_create2 script::can_detect_contract_when_multiple_versions script::can_execute_script_command2 script::can_execute_script_command_with_args script::can_execute_script_command_with_manual_gas_limit_unlocked script::can_execute_script_command_with_sig script::can_execute_script_with_arguments_nested_deploy script::can_remeber_keys script::can_run_script_with_empty_setup script::can_sign_with_script_wallet_multiple script::can_simulate_with_default_sender script::check_broadcast_log script::does_script_override_correctly script::fail_broadcast_staticcall script::panic_no_deployer_set script::test_broadcast_raw_create2_deployer script::test_default_sender_balance soldeer::install_dependency soldeer::install_dependency_git_commit soldeer::install_dependency_with_remappings_txt soldeer::update_dependencies svm::can_test_with_latest_solc svm::test_svm_releases_linux_amd64 svm::test_svm_releases_macos_amd64 test_cmd::can_disable_block_gas_limit test_cmd::can_get_broadcast_txs script::can_deploy_script_remember_key test_cmd::can_run_test_with_json_output_non_verbose test_cmd::can_set_filter_values test_cmd::can_test_repeatedly test_cmd::can_test_with_match_path test_cmd::can_use_libs_in_multi_fork test_cmd::deterministic_randomness_with_seed test_cmd::exit_code_error_on_fail_fast test_cmd::fork_traces test_cmd::gas_metering_gasleft test_cmd::gas_metering_reset test_cmd::internal_functions_trace ext_integration::sablier_v2 test_cmd::metadata_bytecode_traces test_cmd::runs_tests_exactly_once_with_changed_versions test_cmd::pause_tracing test_cmd::should_exit_early_on_invariant_failure test_cmd::should_generate_junit_xml_report_with_logs test_cmd::should_not_record_setup_failures test_cmd::should_not_show_logs_when_fuzz_test_inline_config test_cmd::should_show_logs_when_fuzz_test_inline_config test_cmd::should_replay_failures_only test_cmd::should_show_state_changes test_cmd::test_assume_no_revert test_cmd::skip_setup test_cmd::test_expect_partial_revert test_cmd::test_fail_deprecation_warning test_cmd::test_deprecated_cheatcode_warning test_cmd::warn_no_tests_match verify::can_guess_constructor_args verify::can_verify_random_contract_optimism_kovan verify_bytecode::can_ignore_creation test_cmd::test_roll_scroll_fork_with_cancun verify_bytecode::can_vb_create2_with_blockscout verify_bytecode::can_verify_bytecode_with_blockscout script::can_deploy_script_remember_key verify_bytecode::can_verify_bytecode_with_metadata cheats::test_cheats_local_multi_version test_invariant_roll_fork_handler

        # primeros -> 6500 aprox (funca)
        run: cargo nextest run cmd::wallet::tests::can_parse_wallet_sign_hex_message cmd::wallet::vanity::tests::save_path dispatcher::tests::test_comment_regex cmd::wallet::vanity::tests::find_simple_vanity_start storage_layout_complex_json test_clear_cache test_list_sessions test_load_latest_cache test_write_session executor::tests::test_expressions build::compile_json executor::tests::test_types build::build_sizes_no_forge_std cache::can_list_cache build::test_can_skip_contract cache::can_list_specific_chain cmd::can_bind cmd::can_build_names_repeatedly cmd::can_build_skip_contracts cmd::can_build_specific_paths cmd::can_check_snapshot cmd::can_clean_non_existing cmd::can_clean_config cmd::can_clone cmd::can_compile_without_warnings cmd::can_detect_dirty_git_status_on_init cmd::can_clone_no_remappings_txt cmd::can_fail_compile_with_warnings cmd::can_init_in_empty_repo cmd::can_init_no_git cmd::can_emit_multiple_extra_output cmd::can_init_quiet cmd::can_init_vscode cmd::can_init_template cmd::can_inspect_counter_pretty cmd::can_init_with_dir_and_template cmd::can_install_and_remove cmd::can_install_missing_deps_test cmd::can_print_warnings build::initcode_size_exceeds_limit cmd::can_use_absolute_imports_from_test_and_script cmd::gas_report_all_contracts cmd::can_install_latest_release_tag cmd::gas_report_ignore_some_contracts cmd::gas_report_size_for_nested_create compiler::can_list_resolved_compiler_versions compiler::can_list_resolved_compiler_versions_verbose compiler::can_list_resolved_multiple_compiler_versions cmd::gas_report_with_fallback compiler::can_list_resolved_multiple_compiler_versions_skipped_json compiler::can_list_resolved_multiple_compiler_versions_verbose_json cmd::can_update_library_with_outdated_nested_dependency config::can_extract_config_values config::can_detect_config_vals config::can_override_config config::can_parse_dapp_libraries config::can_resolve_symlink_fs_permissions config::can_set_gas_price config::can_show_config config::can_set_solc_explicitly config::can_parse_remappings_correctly config::can_update_libs_section config::config_emit_warnings config::test_project_remappings context::can_set_forge_script_dry_run_context context::can_set_forge_test_snapshot_context config::test_submodule_root_path_remappings coverage::assert coverage::branch_with_calldata_reads coverage::empty_functions coverage::line_hit_not_doubled coverage::identical_bytecodes coverage::no_match coverage::require coverage::yul coverage::single_statement create::can_create_oracle_on_goerli create::can_create_simple_on_goerli eip712::test_eip712 create::can_create_using_unlocked coverage::basic_crlf ext_integration::drai ext_integration::makerdao_multicall ext_integration::lil_web3 ext_integration::prb_math ext_integration::geb ext_integration::stringutils geiger::call inline_config::evm_version inline_config::invalid_value inline_config::runs multi_script::can_not_change_fork_during_broadcast multi_script::can_resume_multi_chain_script ext_integration::solady script::adheres_to_json_flag script::assert_can_detect_unlinked_target_with_libraries script::assert_can_create_multiple_contracts_with_correct_nonce script::assert_exit_code_error_on_failure_script script::assert_tx_origin_is_not_overritten script::can_decode_custom_errors script::can_deploy_and_simulate_mixed_broadcast_modes script::can_deploy_library_create2 script::can_deploy_no_arg_broadcast script::can_deploy_script_with_lib script::can_deploy_unlocked script::can_deploy_with_custom_create2 script::can_detect_contract_when_multiple_versions script::can_execute_script_command2 script::can_execute_script_command_with_args script::can_execute_script_command_with_manual_gas_limit_unlocked script::can_execute_script_command_with_sig script::can_execute_script_with_arguments_nested_deploy script::can_remeber_keys script::can_run_script_with_empty_setup script::can_sign_with_script_wallet_multiple script::can_simulate_with_default_sender script::check_broadcast_log script::does_script_override_correctly script::fail_broadcast_staticcall script::panic_no_deployer_set script::test_broadcast_raw_create2_deployer script::test_default_sender_balance soldeer::install_dependency soldeer::install_dependency_git_commit soldeer::install_dependency_with_remappings_txt soldeer::update_dependencies svm::can_test_with_latest_solc svm::test_svm_releases_linux_amd64 svm::test_svm_releases_macos_amd64 test_cmd::can_disable_block_gas_limit test_cmd::can_get_broadcast_txs script::can_deploy_script_remember_key test_cmd::can_run_test_with_json_output_non_verbose test_cmd::can_set_filter_values test_cmd::can_test_repeatedly test_cmd::can_test_with_match_path test_cmd::can_use_libs_in_multi_fork test_cmd::deterministic_randomness_with_seed test_cmd::exit_code_error_on_fail_fast test_cmd::fork_traces test_cmd::gas_metering_gasleft test_cmd::gas_metering_reset test_cmd::internal_functions_trace ext_integration::sablier_v2 test_cmd::metadata_bytecode_traces test_cmd::runs_tests_exactly_once_with_changed_versions test_cmd::pause_tracing test_cmd::should_exit_early_on_invariant_failure test_cmd::should_generate_junit_xml_report_with_logs test_cmd::should_not_record_setup_failures test_cmd::should_not_show_logs_when_fuzz_test_inline_config test_cmd::should_show_logs_when_fuzz_test_inline_config test_cmd::should_replay_failures_only test_cmd::should_show_state_changes test_cmd::test_assume_no_revert test_cmd::skip_setup test_cmd::test_expect_partial_revert test_cmd::test_fail_deprecation_warning test_cmd::test_deprecated_cheatcode_warning test_cmd::warn_no_tests_match verify::can_guess_constructor_args verify::can_verify_random_contract_optimism_kovan verify_bytecode::can_ignore_creation test_cmd::test_roll_scroll_fork_with_cancun verify_bytecode::can_vb_create2_with_blockscout verify_bytecode::can_verify_bytecode_with_blockscout script::can_deploy_script_remember_key verify_bytecode::can_verify_bytecode_with_metadata cheats::test_cheats_local_multi_version cheats::test_cheats_local_default_isolated core::test_assertions_revert_false core::test_core core::test_env_vars core::test_linking core::test_trace fork::test_cheats_fork_revert fork::test_get_logs_fork script::can_deploy_script_remember_key fork::test_launch_fork_ws fs::test_fs_default fuzz::test_can_scrape_bytecode fuzz::test_inline_max_test_rejects fuzz::test_successful_fuzz_cases invariant::should_revert_with_assume_code inline::inline_config_run_invariant invariant::should_not_fail_replay_assume test_invariant_roll_fork_handler
